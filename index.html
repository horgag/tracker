<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Serve Tracker</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gray-900 text-white p-6 flex flex-col items-center">
  <h1 class="text-2xl font-bold mb-4">Serve Tracker</h1>
  
  <div class="flex gap-2 mb-6">
    <button onclick="prevSet()" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-xl">â†</button>
    <span id="setLabel" class="px-6 py-2 bg-gray-800 rounded-lg text-xl font-semibold">Set 1</span>
    <button onclick="nextSet()" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-xl">â†’</button>
  </div>
  
  <div class="w-full max-w-sm space-y-4">
    <button onclick="add('first')" class="w-full py-8 text-2xl font-semibold bg-green-600 hover:bg-green-500 active:bg-green-700 rounded-2xl">
      1st Serve <span id="first" class="text-3xl ml-2">0</span>
    </button>

    <button onclick="add('second')" class="w-full py-8 text-2xl font-semibold bg-yellow-600 hover:bg-yellow-500 active:bg-yellow-700 rounded-2xl">
      2nd Serve <span id="second" class="text-3xl ml-2">0</span>
    </button>

    <button onclick="add('double')" class="w-full py-8 text-2xl font-semibold bg-red-600 hover:bg-red-500 active:bg-red-700 rounded-2xl">
      Double Fault <span id="double" class="text-3xl ml-2">0</span>
    </button>
  </div>

  <p id="setStats" class="mt-6 text-lg text-gray-400">Set: 0 serves | 0%</p>
  <p id="totalStats" class="mt-2 text-lg text-white">Total: 0 serves | 0%</p>

  <div class="flex gap-4 mt-6">
    <button onclick="resetSet()" class="px-6 py-3 text-lg bg-gray-700 hover:bg-gray-600 rounded-xl">Reset Set</button>
    <button onclick="resetAll()" class="px-6 py-3 text-lg bg-red-800 hover:bg-red-700 rounded-xl">Reset All</button>
  </div>

  <script>
    let data = JSON.parse(localStorage.getItem('serveData2')) || {sets: [{first:0,second:0,double:0}], currentSet: 0};
    
    function save() { localStorage.setItem('serveData2', JSON.stringify(data)); }
    
    function cur() { return data.sets[data.currentSet]; }
    
    function render() {
      let s = cur();
      ['first','second','double'].forEach(t => document.getElementById(t).textContent = s[t]);
      document.getElementById('setLabel').textContent = `Set ${data.currentSet + 1}`;
      
      let setTotal = s.first + s.second + s.double;
      let setPct = setTotal > 0 ? Math.round(s.first / setTotal * 100) : 0;
      document.getElementById('setStats').textContent = `Set: ${setTotal} serves | ${setPct}%`;
      
      let t = {first:0, second:0, double:0};
      data.sets.forEach(x => { t.first += x.first; t.second += x.second; t.double += x.double; });
      let total = t.first + t.second + t.double;
      let totalPct = total > 0 ? Math.round(t.first / total * 100) : 0;
      document.getElementById('totalStats').textContent = `Total: ${total} serves | ${totalPct}%`;
    }
    
    function add(t) { cur()[t]++; save(); render(); }
    
    function prevSet() {
      if (data.currentSet > 0) { data.currentSet--; save(); render(); }
    }
    
    function nextSet() {
      data.currentSet++;
      if (!data.sets[data.currentSet]) data.sets[data.currentSet] = {first:0,second:0,double:0};
      save(); render();
    }
    
    function resetSet() { data.sets[data.currentSet] = {first:0,second:0,double:0}; save(); render(); }
    
    function resetAll() { data = {sets: [{first:0,second:0,double:0}], currentSet: 0}; save(); render(); }
    
    render();
  </script>
</body>
</html>
